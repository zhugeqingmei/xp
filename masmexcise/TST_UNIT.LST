Microsoft (R) Macro Assembler Version 5.00                  1/3/19 10:46:41
                                                             Page     1-1


				;è¯¾ç¨‹è®¾è®¡1ï¼šæŠŠå®éªŒ7çš„æ•°æ®æ˜¾ç¤ºå‡ºæ
				¥ï¼Œä»¥10è¿›åˆ¶çš„å½¢å¼æ˜¾ç¤ºå‡ºæ¥ã€‚ 
				;ä½¿ç”¨äº†æ•°å€¼è½¬æ¢ï¼Œå­—ç¬¦çš„æ˜¾ç¤ºï¼Œé™¤æ
				³•æº¢å‡ºã€‚ 
				;é—®é¢˜1ï¼šä¸ºä½•è¿”å›çš„ç¨‹åºä¸å¯¹ 
				 
				assume cs:codesg,ss:stk 
				 
 0000				datasg segment 
 0000  00000000				tmp2 dd 0	;æŠŠè¦è¿›è¡Œè½¬æ¢çš„æ
				•°æ®æ”¾åˆ°è¿™é‡Œ 
 0004  000A[				tmp3 db 10 dup (0)	;è½¬æ¢å®Œæˆå
				çš„æ•°æ®åœ¨è¿™é‡Œã€‚ 
	   00			
			 ]	
				
 000E  0001 0002			tmp4 dw 1,2 
 = 0004					count equ $-tmp4 
 0012  48 45 4C 4C 4F 21 0D		mstr db 'HELLO!',0dh,0ah,'$' 
       0A 24			
 001B  6F6B				mstr2 dw 'ok' 
 001D				datasg ends 
				 
 0000				stk segment stack 
 0000  0064[				dw 100 dup (0) 
	   0000			
			 ]	
				
 00C8				stk ends 
				 
 0000				codesg segment 
				;----------------------------------------------
				----------- 
				;ä¸»å‡½æ•°çš„å…¥å£ 
				;æµ‹è¯•10è¿›åˆ¶è½¬æ¢çš„å‡½æ•°ï¼Œæˆ‘ä»¬å‘ç°èƒ
				½å¤Ÿæ­£å¸¸è¿ä½œ 
				;----------------------------------------------
				----------- 
 0000				start:	 
				 
 0000  B8 0004				mov ax,count	;è¿™é‡Œå¾—åˆ°çš„æ˜¯ä»¥å
				­—èŠ‚ä¸ºå•ä½çš„ä¸ªæ•°ç»Ÿè®¡ 
				 
 0003  E8 001C R			call my_test 
				 
					;--------------------------------------
				--- 
					;è¿™æ˜¯æ£€æµ‹designçš„å‡½æ•° 
 0006  B8 ---- R			mov ax,datasg 
 0009  8E D8				mov ds,ax 
 000B  B8 04D2				mov ax,1234 
 000E  8D 1E 0000 R			lea bx,tmp2 
 0012  89 07				mov [bx],ax 
 0014  E8 0031 R			call deci 
Microsoft (R) Macro Assembler Version 5.00                  1/3/19 10:46:41
                                                             Page     1-2


 0017  B8 4C00				mov ax,4c00H 
 001A  CD 21				int 21H 
				;----------------------------------------------
				----------- 
				;æµ‹è¯•å„ç§è¯­å¥ 
				;----------------------------------------------
				----------- 
 001C				my_test: 
 001C  B8 ---- R			mov ax,datasg 
 001F  8E D8				mov ds,ax 
				 
 0021  B8 0010				mov ax,10H 
 0024  25 0010				and ax,10000B 
				 
					;ä½¿ç”¨dosä¸­æ–­æ¥æ˜¾ç¤ºå­—ç¬¦ä¸² 
					;dxå­˜æ”¾å­—ç¬¦ä¸²é¦–åœ°å€ï¼Œaxæ˜¯ä¸­æ
				–­ç¨‹åºå·ç ã€‚å­—ç¬¦ä¸²éœ€è¦ä¸€ä¸ª$ç»“æŸã€
				‚ 
 0027  8D 16 0012 R			lea dx,mstr 
 002B  B8 0900				mov ax,900H 
 002E  CD 21				int 21H 
 0030  C3				ret 
				 
				 
				;----------------------------------------------
				------- 
				;è®¡ç®—10è¿›åˆ¶çš„æ•°æ®ã€‚ 
				;----------------------------------------------
				------- 
 0031				deci: 
 0031  BE 0000				mov si,0		;è®¡ç®—ä¸€å…±å‡
				 ä¸ª10è¿›åˆ¶æ•°æ® 
				 
 0034  8D 1E 0000 R			lea bx,tmp2 
 0038  B8 ---- R			mov ax,datasg 
 003B  8E D8				mov ds,ax 
 003D  8B 07				mov ax,[bx] 
 003F  8B 57 02				mov dx,[bx+2] 
 0042				deci_s1: 
 0042  B9 000A				mov cx,10 
 0045  E8 0066 R			call divdw 
 0048  46				inc si 
 0049  51				push cx 
 004A  83 FA 00				cmp dx,0		;å¯¹ç»“æœè¿›è¡
				Œåˆ¤æ–­ï¼Œå¦‚æœä¸¤ä¸ªæ˜¯0æ‰è¿›è¡Œå¤„ç†ã€‚ 
 004D  75 05				jnz deci_s0 
 004F  3D 0000				cmp ax,0 
 0052  74 02				jz deci_ret 
 0054				deci_s0: 
 0054  EB EC				jmp deci_s1 
 0056				deci_ret: 
 0056  8B CE				mov cx,si 
 0058  8D 1E 0004 R			lea bx,tmp3 
 005C  BE 0000				mov si,0 
Microsoft (R) Macro Assembler Version 5.00                  1/3/19 10:46:41
                                                             Page     1-3


 005F				deci_s2: 
 005F  5A				pop dx 
 0060  88 10				mov [bx+si],dl 
 0062  46				inc si 
 0063  E2 FA				loop deci_s2 
				 
 0065  C3				ret 
				;----------------------------------------------
				------- 
				;;è¿›è¡Œé™¤æ³•è¿ç®—ï¼Œdwordé™¤ä»¥wordï¼Œå¾—åˆ°
				dwordã€‚ 
				;(ax)=dword.(dx)=word.(cx)=é™¤æ•° 
				;ç»“æœæ”¾å…¥dxé«˜ä½ï¼Œaxæ”¾å…¥ä½ä½ï¼Œcxä¿å
				­˜ä½™æ•°ã€‚ 
				;----------------------------------------------
				------- 
				 
 0066				divdw: 
 0066  56					push si 
 0067  57					push di 
				 
 0068  8B F0					mov si,ax	;ä¿å­˜ä½å­— 
 006A  B8 0000					mov ax,0 
 006D  92					xchg dx,ax	;æŠŠé«˜ä½æ•°æ
				®è¡¨ç¤ºæˆ32ä½ 
 006E  F7 F1					div cx 
 0070  8B F8					mov di,ax	;æŠŠå•†ä¿å­˜èµ
				·æ¥ 
 0072  8B C6					mov ax,si 	;æŠŠä½å­—æ¢å¤
				 
 0074  F7 F1					div cx 
 0076  8B CA					mov cx,dx	;ä½™æ•°æ”¾å…¥cx
				 
 0078  8B D7					mov dx,di 
						 
 007A  5F					pop di 
 007B  5E					pop si 
 007C  C3					ret 
				 
 007D				codesg ends 
				end start 
Microsoft (R) Macro Assembler Version 5.00                  1/3/19 10:46:41
                                                             Symbols-1


Segments and Groups:

                N a m e         	Length	 Align	Combine Class

CODESG . . . . . . . . . . . . .  	007D	PARA	NONE	
DATASG . . . . . . . . . . . . .  	001D	PARA	NONE	
STK  . . . . . . . . . . . . . .  	00C8	PARA	STACK	

Symbols:            

                N a m e         	Type	 Value	 Attr

COUNT  . . . . . . . . . . . . .  	NUMBER	0004	

DECI . . . . . . . . . . . . . .  	L NEAR	0031	CODESG
DECI_RET . . . . . . . . . . . .  	L NEAR	0056	CODESG
DECI_S0  . . . . . . . . . . . .  	L NEAR	0054	CODESG
DECI_S1  . . . . . . . . . . . .  	L NEAR	0042	CODESG
DECI_S2  . . . . . . . . . . . .  	L NEAR	005F	CODESG
DIVDW  . . . . . . . . . . . . .  	L NEAR	0066	CODESG

MSTR . . . . . . . . . . . . . .  	L BYTE	0012	DATASG
MSTR2  . . . . . . . . . . . . .  	L WORD	001B	DATASG
MY_TEST  . . . . . . . . . . . .  	L NEAR	001C	CODESG

START  . . . . . . . . . . . . .  	L NEAR	0000	CODESG

TMP2 . . . . . . . . . . . . . .  	L DWORD	0000	DATASG
TMP3 . . . . . . . . . . . . . .  	L BYTE	0004	DATASG	Length = 000A
TMP4 . . . . . . . . . . . . . .  	L WORD	000E	DATASG

@FILENAME  . . . . . . . . . . .  	TEXT  tst_unit		


    117 Source  Lines
    117 Total   Lines
     19 Symbols

  50014 + 451186 Bytes symbol space free

      0 Warning Errors
      0 Severe  Errors
